<script setup lang="ts">
import Burger from "./Burger/Burger.vue";
import Sidebar from "./SideBar/Sidebar.vue";
import { ref, onMounted, onBeforeUnmount } from "vue";

const isOpenSidebar = ref(false);
const windowWidth = ref(window.innerWidth);

const toggleSidebar = () => {
  
  isOpenSidebar.value = !isOpenSidebar.value;
};

const updateWindowWidth = () => {
  windowWidth.value = window.innerWidth;
};

onMounted(() => {
  window.addEventListener("resize", updateWindowWidth);
});

onBeforeUnmount(() => {
  window.removeEventListener("resize", updateWindowWidth);
});
</script>

<template>
  <div class="home__container">
    <header class="home-header">
      <div class="home-header__container">
        <Burger :isOpenSidebar @toggle-sidebar="toggleSidebar"  v-if="windowWidth <= 900"/>
        <div class="home-header__icon">
          <img
            src="/pictures/icons/main__logo__tablet.png"
            alt=""
            class="home-header__icon--tablet"
          />
          <img
            src="/pictures/icons/main__logo_phone.png"
            alt=""
            class="home-header__icon--phone"
          />
          Ellie.ai
        </div>
        <div class="home-header__profile">
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            xmlns="http://www.w3.org/2000/svg"
            class="account-header__profile--img"
          >
            <path
              class="account-header__profile--img"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.455 10.9091C20.455 12.3558 19.8803 13.7432 18.8574 14.7661C17.8345 15.789 
                16.4471 16.3637 15.0004 16.3637C13.5538 16.3637 12.1664 15.789 11.1435 14.7661C10.1206 
                13.7432 9.5459 12.3558 9.5459 10.9091C9.5459 9.4625 10.1206 8.07511 11.1435 7.05219C12.1664 
                6.02926 13.5538 5.45459 15.0004 5.45459C16.4471 5.45459 17.8345 6.02926 18.8574 7.05219C19.8803 
                8.07511 20.455 9.4625 20.455 10.9091ZM17.7277 10.9091C17.7277 11.6325 17.4404 12.3261 16.9289 
                12.8376C16.4175 13.3491 15.7238 13.6364 15.0004 13.6364C14.2771 13.6364 13.5834 13.3491 13.072 
                12.8376C12.5605 12.3261 12.2732 11.6325 12.2732 10.9091C12.2732 10.1858 12.5605 9.49212 13.072 
                8.98066C13.5834 8.4692 14.2771 8.18186 15.0004 8.18186C15.7238 8.18186 16.4175 8.4692 16.9289 
                8.98066C17.4404 9.49212 17.7277 10.1858 17.7277 10.9091Z"
            />
            <path
              class="account-header__profile--img"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15 0C6.71591 0 0 6.71591 0 15C0 23.2841 6.71591 30 15 30C23.2841 30 30 23.2841 
                30 15C30 6.71591 23.2841 0 15 0ZM2.72727 15C2.72727 17.85 3.69955 20.4736 5.32909 22.5573C6.47378 
                21.0547 7.95021 19.837 9.64314 18.9992C11.3361 18.1613 13.1997 17.7261 15.0886 17.7273C16.9532 
                17.7251 18.7937 18.1488 20.4697 18.966C22.1457 19.7832 23.613 20.9723 24.7595 22.4427C25.9411 
                20.8931 26.7366 19.0844 27.0803 17.1663C27.424 15.2481 27.306 13.2757 26.7361 11.4123C26.1662 
                9.54877 25.1608 7.84779 23.8029 6.45005C22.4451 5.05231 20.774 3.99799 18.9278 3.37433C17.0816 
                2.75067 15.1135 2.5756 13.1862 2.8636C11.2589 3.1516 9.4279 3.8944 7.84469 5.03053C6.26147 
                6.16666 4.97156 7.66346 4.08168 9.39709C3.19179 11.1307 2.72752 13.0513 2.72727 15ZM15 
                27.2727C12.1826 27.2773 9.4502 26.308 7.26545 24.5291C8.14474 23.2699 9.31526 22.2419 10.6774 
                21.5324C12.0395 20.823 13.5529 20.4532 15.0886 20.4545C16.6052 20.4532 18.1003 20.8138 19.4495 
                21.5063C20.7988 22.1989 21.9633 23.2034 22.8464 24.4364C20.6447 26.2732 17.8672 27.2772 15 
                27.2727Z"
            />
          </svg>
        </div>
      </div>
    </header>
    <main class="home">
      <div class="home__wrapper">
        <Sidebar :isOpenSidebar />
      </div>
    </main>
  </div>
</template>

<style>
@import "./HomeStyle.scss";
</style>
